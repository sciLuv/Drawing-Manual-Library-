//ordre des valeurs dans les books 1/index0) auteur 2/index1) titre 3/index2) genre 4/index3) langue 5/index4) mots clés 6/index5) lien
let book1 = ['Andrew Loomis', 'Figure Drawing For All It\'s Worth ', 'Gesture', 'Anglais', ['Gesture', 'Anatomie', 'Proportion'], 'PDF/example.pdf'];
let book2 = ['Scott Robertson', 'How To Draw', 'Perspective', 'Anglais', ['Perspective', 'Construction','Ligne de fuite', 'Point de fuite', 'Architecture', 'Vehicule', 'Batiment', 'Paysage'], 'PDF/example.pdf'];
let book3 = ['Andrew Loomis', 'Creative Illustration', 'Composition', 'Anglais', ['Composition', 'Valeur', 'Cadre'], 'PDF/example.pdf'];
let book4 = ['Michael Hampton', 'Figure Drawing', 'Gesture', 'Anglais', ['Gesture', 'Anatomie', 'Proportion'], 'PDF/example.pdf'];
let book5 = ['Paul Richer', 'Anatomie Artistique: description', 'Anatomie', 'Français', ['Anatomie', 'Crane', 'Os', 'Muscle'], 'PDF/example.pdf'];
let book6 = ['Paul Richer', 'Anatomie Artistique: planches', 'Anatomie', 'Français', ['Anatomie', 'Crane', 'Os', 'Muscle'], 'PDF/example.pdf'];
let book7 = ['Brian McDonald', 'Invisible Ink', 'Narration', 'Anglais', ['Scénario', 'Narration', 'Histoire'], 'PDF/example.pdf'];
let book8 = ['Ernest R Norling', 'Perspective Made Easy', 'Perspective', 'Anglais', ['Perspective', 'Construction', 'Ligne de fuite', 'Point de fuite'], 'PDF/example.pdf'];
let book9 = ['H R Giger', 'Necronomicon', 'Artbook', 'Allemand',['Artbook', 'Artiste', 'Peintre', 'Peinture'], 'PDF/example.pdf'];
let book10 = ['John Truby', 'Anatomie Du Scénario', 'Narration', 'Français',['Scénario','Narration','Histoire'], 'PDF/example.pdf'];
let book11 = ['Richard William', 'Animator\'s Survival Kit', 'Animation', 'Anglais',['Animation', 'Dessin animé', 'Anime', 'Frame'], 'PDF/example.pdf'];
let book12 = ['Andrew Loomis', 'Fun With A Pencil', 'Débutant', 'Anglais',['Débutant', 'Visage', 'Caricature'], 'PDF/example.pdf'];
let book13 = ['Andrew Loomis', 'Drawing The Head & Hands', 'Tête et Main', 'Anglais',['Tête', 'Visage', 'Anatomie', 'Main'], 'PDF/example.pdf'];
let book14 = ['Andrew Loomis', 'Succesful Drawing' , 'Général', 'Anglais',['Perspective', 'Forme', 'surface'], 'PDF/example.pdf'];
let book15 = ['Andrew Loomis', 'The Eye Of The Painter', 'Composition', 'Anglais',['Composition', 'Analyse d\'oeuvre', 'Peinture'], 'PDF/example.pdf'];
let book16 = ['Aristote', 'Les Poétiques', 'Philosophie', 'Français',['tragédie', 'Histoire', 'Narration'], 'PDF/example.pdf'];
let book17 = ['Beaux Art du  JiangSu', 'Comment Dessiner La Nature', 'Nature', 'Chinois',['Nature', 'Arbre', 'Fleur'], 'PDF/example.pdf'];
let book18 = ['Burne Horgarth', 'DynamicFigureDrawing', 'Gesture', 'Anglais',['Gesture', 'Anatomie', 'Proportion'], 'PDF/example.pdf'];
let book19 = ['Carol Belanger Grafton', 'Arms & Armor', 'Référence', 'Anglais',['Arme', 'Armure', 'Moyen-age', 'Médiéval'], 'PDF/example.pdf'];
let book20 = ['Clip Paint Studio', 'Illustration Et Peinture Numérique', 'Infographie', 'Japonais',['Ordinateur', 'Tutoriel'], 'PDF/example.pdf'];
let book21 = ['Eliot Goldfinger', 'Human Anatomy For Artists', 'Anatomie', 'Anglais',['Anatomie', 'Crane', 'Os', 'Muscle'], 'PDF/example.pdf'];
let book22 = ['Frédéric Delavier', 'Strength Training Anatomy', 'BodyBuilding', 'Anglais',['Muscle', 'Mouvement', 'Interaction'], 'PDF/example.pdf'];
let book23 = ['Glenn Vilppu', 'Drawing Manual', 'Gesture', 'Anglais',['Gesture', 'Anatomie', 'Proportion'],'PDF/example.pdf'];
let book24 = ['Hidetoshi Fujii', 'Dessiner Les Personnages Manga', 'Style Manga', 'Japonais',['Manga', 'Style'], 'PDF/example.pdf'];
let book25 = ['Hirohiko Araki' , 'Manga In Theory And Practice', 'Bande Dessinée', 'Anglais',['Mise en scène', 'Narration', 'Histoire', 'Composition'], 'PDF/example.pdf'];
let book26 = ['J\'neonDragon\' Peffer', 'Fantasy Characters', 'Référence', 'Anglais',['Elfe', 'Orc', 'Nain'], 'PDF/example.pdf'];
let book27 = ['J\'neonDragon\' Peffer', 'How To Draw Fantastic Dragons', 'Référence', 'Anglais',['Chimere', 'hydre', 'Guivre', 'Animal'], 'PDF/example.pdf'];
let book28 = ['John Hagan', 'Painting Beyond Fashion', 'Général', 'Anglais',['Peinture', 'Analyse d\'oeuvre', 'Composition'], 'PDF/example.pdf'];
let book29 = ['Jorge Paricio', 'Perspective Sketching', 'Perspective', 'Anglais',['Perspective', 'Objet', 'Design'], 'PDF/example.pdf'];
let book30 = ['José Parramon', 'Comment Dessiner Le Corps Humain', 'Gesture', 'Français',['Gesture', 'Anatomie', 'Proportion'], 'PDF/example.pdf'];
let book31 = ['Joseph Campbell', 'Le héros aux Mille Et Un Visages', 'Narration', 'Français',['Scénario','Narration','Histoire'], 'PDF/example.pdf'];
let book32 = ['Ken Hultgren', 'The Art Of Animal Drawing', 'Animaux', 'Anglais',['Lion', 'Chat', 'Félin', 'Cheval', 'Cochon', 'Chien', 'Animal'], 'PDF/example.pdf'];
let book33 = ['KojiNishino', 'Dessin Manga A Partir De Photos', 'Style Manga', 'Japonais',['Manga', 'Style'], 'PDF/example.pdf'];
let book34 = ['Koji Shimamoto', 'SuperPoseBook', 'Référence Gestuelle', 'Japonais',['Gesture', 'Pose', 'Femme'], 'PDF/example.pdf'];
let book35 = ['Koji Shimamoto', 'SuperPoseBook 2', 'Référence Gestuelle', 'Japonais',['Gesture', 'Pose', 'Femme'], 'PDF/example.pdf'];
let book36 = ['Koji Shimamoto', 'SuperPoseBook 3', 'Référence Gestuelle', 'Japonais',['Gesture', 'Pose', 'Femme'], 'PDF/example.pdf'];
let book37 = ['Marcos Mateu-Mestre', 'Framed Perspective 1', 'Perspective', 'Anglais',['Perspective', 'Construction', 'Ligne de fuite', 'Point de fuite'], 'PDF/example.pdf'];
let book38 = ['Marcos Mateu-Mestre', 'Framed Perspective 2', 'Perspective', 'Anglais',['Perspective', 'Construction', 'Ligne de fuite', 'Point de fuite'], 'PDF/example.pdf'];
let book39 = ['MDI Corporation', 'Apprendre A Dessiner Des Filles Charmante', 'Référence', 'Japonais',['Manga', 'Femme', 'Pose'], 'PDF/example.pdf'];
let book40 = ['Perston Blair', 'Cartoon Animation', 'Animation', 'Anglais',['Animation', 'Dessin animé', 'Anime', 'Frame'], 'PDF/example.pdf'];
let book41 = ['Scott McCloud', 'The Invisible Art', 'Bande Dessinée', 'Anglais',['Mise en scène', 'Narration', 'Composition', "Média"], 'PDF/example.pdf'];
let book42 = ['Stanley Maltzman', 'Drawing Nature', 'Nature', 'Anglais',['Nature', 'Arbre', 'Fleur', 'paysage'], 'PDF/example.pdf'];
let book43 = ['W Ellenberger', 'An Atlas Of Animal Anatomy For Artists', 'Animaux', 'Anglais',['Lion', 'Chat', 'Félin', 'Cheval', 'Chèvre', 'Chien', 'Animal'],'PDF/example.pdf'];
let book44 = ['Brenda Hoddinott', 'Le Dessin Pour Les Nuls', 'Débutant', 'Français',['Débutant', 'Composition'], 'PDF/example.pdf'];
let book45 = ['Brigdman', 'Bridgman\'s Complete Guide To Drawing From Life', 'Gesture', 'Anglais',['Gesture', 'Anatomie', 'Proportion'], 'PDF/example.pdf'];
let book46 = ['Chirstopher Hart', 'How To Draw Comic Book Heroes And Villains', 'Style Comics', 'Anglais',['comics', 'style'], 'PDF/example.pdf'];
let book47 = ['Christopher Hart','Drawing Cutting Edge Comics', 'Style Comics','Anglais',['comics', 'style'], 'PDF/example.pdf'];
let book48 = ['Christopher Hart','How To Draw Great Looking Comic Book Women', 'Style Comics', 'Anglais',['comics', 'Pose', 'Femme'], 'PDF/example.pdf'];
let book49 = ['Diana Constance', 'Le Dessin De Nu', 'Général', 'Français',['Gesture', 'Anatomie', 'Proportion', 'Observation'], 'PDF/example.pdf'];
let book50 = ['Glynis Barnes-Mellish', 'WatercolourWorkshop', 'Peinture', 'Anglais',['Aquarelle', 'Couleur'], 'PDF/example.pdf'];
let book51 = ['Gwen White', 'Perspective', 'Perspective', 'Anglais',['Perspective', 'Construction', 'Ligne de fuite', 'Point de fuite'], 'PDF/example.pdf'];
let book52 = ['Heinz Feneis', 'Pocket Atlas Of Human Anatomy', 'Anatomie', 'Anglais',['Anatomie', 'Crane', 'Os', 'Muscle'], 'PDF/example.pdf'];
let book53 = ['Jack Hamm', 'Drawing The Head And Figure', 'Tête et Main', 'Anglais',['Tête', 'Visage', 'Anatomie', 'Main'], 'PDF/example.pdf'];
let book54 = ['J D Harling', 'On Drawing Trees And Nature', 'Nature', 'Anglais',['Nature', 'Arbre', 'Fleur'], 'PDF/example.pdf'];
let book55 = ['Jeff Mellem', 'Sketching People Life Drawing Basics ', 'Observation', 'Anglais', ['Gesture', 'Anatomie', 'Proportion', 'Observation'], 'PDF/example.pdf'];
let book56 = ['J M Parramon', 'Dessiner En Perspective', 'Perspective', 'Français', ['Perspective', 'Construction', 'Ligne de fuite', 'Point de fuite'], 'PDF/example.pdf'];
let book57 = ['Joe Weatherly', 'Drawing Animals', 'Animaux', 'Anglais', ['Elephant', 'Lion', 'Félin', 'Cheval', 'Cochon', 'Chien', 'Animal' ], 'PDF/example.pdf'];
let book58 = ['Joseph D\'Amelio', 'Perspective Drawing Handbook', 'Perspective', 'Anglais', ['Perspective', 'Construction', 'Ligne de fuite', 'Point de fuite'], 'PDF/example.pdf'];
let book59 = ['Kensuke Okabayashi', 'Figure Drawing For Dummies', 'Débutant', 'Anglais', ['Gesture', 'Anatomie', 'Proportion'], 'PDF/example.pdf'];
let book60 = ['Michael D Mattesi', 'Force Dynamic Life Drawing For Animators', 'Animation', 'Anglais', ['Gesture', 'Anatomie', 'Proportion', 'Animal'], 'PDF/example.pdf'];
let book61 = ['Nicolaides', 'The Natural Way To Draw', 'Observation', 'Anglais', ['Composition', 'Gesture', 'Observation'], 'PDF/example.pdf'];
let book62 = ['Sarah Simblet', 'Scketchbook For The Artist', 'Général', 'Anglais', ['Composition', 'Observation', 'Gesture'], 'PDF/example.pdf'];
let book63 = ['Sheldon Borenstein', 'See Feel Trace Draw IT', 'Gesture', 'Anglais', ['Gesture', 'Anatomie', 'Proportion'], 'PDF/example.pdf'];
let book64 = ['T Beaudenon', 'Je Dessine Des Pin Up', 'Référence', 'Français',['Pose', 'Femme', 'Proportion'], 'PDF/example.pdf'];
let book65 = ['Thomas C Wang', 'Pencil Sketching', 'Gesture', 'Anglais',['Observation', 'Construction'], 'PDF/example.pdf'];
let book66 = ['Wendon Blake', 'Portrait Drawing', 'Tête', 'Anglais',['Tête', 'Proportion', 'Composition'], 'PDF/example.pdf'];



let library = []; for (i = 1; i <= 66; i++) { library.push(eval('book' + i)); };

let bookAuthor = [], bookTitle = [], bookGenre = [], bookLanguage = [], bookLink = [], bookKeyWordPreview = [], bookKeyWord = [];
let bookGenreStorage = [], bookTitleStorage = [], bookAuthorStorage = [], bookLanguageStorage = [];
for (i = 0; i < library.length; i++)
{bookAuthor.push(library[i][0]); bookTitle.push(library[i][1]); bookGenre.push(library[i][2]); bookLanguage.push(library[i][3]); bookLink.push(library[i][5]); bookKeyWordPreview.push(library[i][4]);
bookKeyWord.push(bookKeyWordPreview[i].join(' - '));
bookLanguageStorage.push(library[i][3]); bookLanguageStorage.sort(); bookGenreStorage.push(library[i][2]); bookGenreStorage.sort(); bookTitleStorage.push(library[i][1]); bookTitleStorage.sort();
bookAuthorStorage.push(library[i][0]); bookAuthorStorage.sort();}

let cacheLibrary = [], cacheBookAuthor = [];cacheBookTitle = [], cacheBookGenre = [], cacheBookLanguage = [], cacheBookLink = [], cacheBookKeyWord = [];
let forgottenLibrary = [], forgottenBookAuthor = [], forgottenBookTitle = [], forgottenBookGenre = [], forgottenBookLanguage = [], forgottenBookLink = [], forgottenBookKeyWord = [];

let buttonCategoriesSelection = document.getElementById('buttonCategoriesSelection'), buttonCategoriesSelectionText = document.getElementById('buttonCategoriesSelectionText');
let buttonCategoriesSelectionImage = document.getElementById('buttonCategoriesSelectionImage');
let categoriesDisplayingOrganisation = document.getElementById('categoriesDisplayingOrganisation') ,categoriesDisplaying = document.getElementById('categoriesDisplaying');
let categoriesContent = document.getElementById('categoriesContent')
let searchHTMLApparence = document.getElementById('search');

let pdfpagination1 = document.getElementById('pdfpagination1'), pdfpagination2 = document.getElementById('pdfpagination2'), pdfDisplay = document.getElementById('pdfDisplay'), pdfDisplayContent = document.getElementById('pdfDisplayContent');

let keyWordCategoryJS = document.getElementById('keyWordCategory'), genreCategoryJS = document.getElementById('genreCategory'), languageCategoryJS = document.getElementById('languageCategory'), authorCategoryJS = document.getElementById('authorCategory');
let keyWordListingJS = document.getElementById('keyWordSListing'), genreListingJS = document.getElementById('genreListing'), languageListingJS = document.getElementById('languageListing'), authorListingJS = document.getElementById('authorListing');
let authorStrictList = [], genreStrictList = [], languageStrictList = [], keyWordStrictList = [];

categoriesDisplayingOrganisation.style.display = 'none'; categoriesContent.style.display = 'none';

for (i = 0; i < library.length; i++) { for (e = 0; e < library.length; e++){ keyWordStrictList.push(bookKeyWordPreview[i][e]); authorStrictList.push(bookAuthor[i]); genreStrictList.push(bookGenre[i]);
languageStrictList.push(bookLanguage[i]); } }
keyWordStrictList.sort(); authorStrictList.sort(); genreStrictList.sort(); languageStrictList.sort();

for (i = 0; i < keyWordStrictList.length; i++) { if (typeof keyWordStrictList[i] == 'undefined'){ keyWordStrictList.splice(i, 1); i--; } }
for (i = 0; i < authorStrictList.length; i++) {if (typeof authorStrictList[i] == 'undefined'){ authorStrictList.splice(i, 1); i--; } }
for (i = 0; i < genreStrictList.length; i++) {if (typeof genreStrictList[i] == 'undefined'){ genreStrictList.splice(i, 1); i--; } }
for (i = 0; i < languageStrictList.length; i++) {if (typeof languageStrictList[i] == 'undefined'){ languageStrictList.splice(i, 1); i--; } }

for (i = 0, e = 1; i < keyWordStrictList.length; i++, e++) { if (keyWordStrictList[i] == keyWordStrictList[e]) { keyWordStrictList.splice(i, 1); i-- ; e--;} }
for (i = 0, e = 1; i < authorStrictList.length; i++, e++) { if (authorStrictList[i] == authorStrictList[e]) { authorStrictList.splice(i, 1); i-- ; e--;} }
for (i = 0, e = 1; i < genreStrictList.length; i++, e++) { if (genreStrictList[i] == genreStrictList[e]) { genreStrictList.splice(i, 1); i-- ; e--;} }
for (i = 0, e = 1; i < languageStrictList.length; i++, e++) { if (languageStrictList[i] == languageStrictList[e]) { languageStrictList.splice(i, 1); i-- ; e--;} }

for (i = 0; i < keyWordStrictList.length; i++) { document.getElementById('keyWordButtonContent').innerHTML += '<button class="keyWordButton"' + i + '">' + keyWordStrictList[i] + '</button>';};
for (i = 0; i < authorStrictList.length; i++) { document.getElementById('authorButtonContent').innerHTML += '<button class="authorButton"' + i + '">' + authorStrictList[i] + '</button>';};
for (i = 0; i < genreStrictList.length; i++) { document.getElementById('genreButtonContent').innerHTML += '<button class="genreButton"' + i + '">' + genreStrictList[i] + '</button>';};
for (i = 0; i < languageStrictList.length; i++) { document.getElementById('languageButtonContent').innerHTML += '<button class="languageButton"' + i + '">' + languageStrictList[i] + '</button>';};

//FONCTION COMPTAGE DES AUTEURS/TITRE/GENRE/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function numberOfAuthorTitleGenreLanguage (){
let bookAuthorStrictList = [], bookTitleStrictList = [], bookGenreStrictList = [], bookLanguageStrictList = [];
for (i = 0; i < library.length; i++) { bookAuthorStrictList.push(bookAuthor[i]); bookTitleStrictList.push(bookTitle[i]); bookGenreStrictList.push(bookGenre[i]); bookLanguageStrictList.push(bookLanguage[i]);}
bookAuthorStrictList.sort();  bookTitleStrictList.sort(); bookGenreStrictList.sort(); bookLanguageStrictList.sort();
//affichage du nombre d'auteur.
for (i = 0, e = 1; i < bookAuthorStrictList.length; i++, e++) { if (bookAuthorStrictList[i] == bookAuthorStrictList[e]) { bookAuthorStrictList.splice(i, 1); i-- ; e--;}  else {} }
document.getElementById('authorNumber').innerText = bookAuthorStrictList.length;
//affichage du nombre de titre.
for (i = 0, e = 1; i < bookTitleStrictList.length; i++, e++) { if (bookTitleStrictList[i] == bookTitleStrictList[e]) { bookTitleStrictList.splice(i, 1); i-- ; e--;}  else {} }
document.getElementById('titleNumber').innerText = bookTitleStrictList.length;
//affichage du nombre de genre.
for (i = 0, e = 1; i < bookGenreStrictList.length; i++, e++) { if (bookGenreStrictList[i] == bookGenreStrictList[e]) { bookGenreStrictList.splice(i, 1); i-- ; e--;}  else {} }
document.getElementById('genreNumber').innerText = bookGenreStrictList.length;
//affichage du nombre de langue.
for (i = 0, e = 1; i < bookLanguageStrictList.length; i++, e++) { if (bookLanguageStrictList[i] == bookLanguageStrictList[e]) { bookLanguageStrictList.splice(i, 1); i-- ; e--;}  else {} }
document.getElementById('languageNumber').innerText = bookLanguageStrictList.length; }

//FONCTION FLECHES D'INDICATION ALPHABETIQUE/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function alphabeticalArrows() {
/* fleches auteur */if  (bookAuthorStorage.join() == bookAuthor.join() ) {document.getElementById('AZAuthor').style.background = 'url("image/A.png")';}
else if (bookAuthorStorage.reverse().join() == bookAuthor.join() ) {document.getElementById('AZAuthor').style.background = 'url("image/Z.png")' ;}
else {document.getElementById('AZAuthor').style.background = 'url("image/A-Z.png")'}
/* fleches titre */if  (bookTitleStorage.join() == bookTitle.join() ) {document.getElementById('AZTitle').style.background = 'url("image/A.png")';}
else if (bookTitleStorage.reverse().join() == bookTitle.join() ) {document.getElementById('AZTitle').style.background = 'url("image/Z.png")' ;}
else {document.getElementById('AZTitle').style.background = 'url("image/A-Z.png")'}
/* fleche genre */if  (bookGenreStorage.join() == bookGenre.join() ) {document.getElementById('AZGenre').style.background = 'url("image/A.png")';}
else if (bookGenreStorage.reverse().join() == bookGenre.join() ) {document.getElementById('AZGenre').style.background = 'url("image/Z.png")' ;}
else {document.getElementById('AZGenre').style.background = 'url("image/A-Z.png")'}
/* fleche langue */if  (bookLanguageStorage.join() == bookLanguage.join() ) {document.getElementById('AZLanguage').style.background = 'url("image/A.png")';}
else if (bookLanguageStorage.reverse().join() == bookLanguage.join() ) {document.getElementById('AZLanguage').style.background = 'url("image/Z.png")' ;}
else {document.getElementById('AZLanguage').style.background = 'url("image/A-Z.png")'} }

//FONCTION CLASSEMENT PAR ORDRE ALPHABETIQUE (2 parties qui fonctionne ensemble)////////////////////////////////////////////////////////////////////////////////////////////////////////
function putOn () { bookAuthor.push(bookAuthor[i]); bookTitle.push(bookTitle[i]); bookGenre.push(bookGenre[i]); bookLanguage.push(bookLanguage[i]); bookLink.push(bookLink[i]); bookKeyWord.push(bookKeyWord[i]); }
function takeOff(){ bookAuthor.splice(i, 1); bookTitle.splice(i, 1); bookGenre.splice(i, 1); bookLanguage.splice(i, 1); bookLink.splice(i, 1); bookKeyWord.splice(i, 1);}
//renverse les listes dans un ordre alphabétique de Z a A
function reverselist(){bookAuthor.reverse(); bookTitle.reverse(); bookGenre.reverse(); bookLanguage.reverse(); bookLink.reverse(); bookKeyWord.reverse();}

//FONCTION OUVERTURE FERMETURE MOT CLES/GENRE/AUTEUR/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function keyWordFunction (){
keyWordListingJS.style.display = 'none'; keyWordCategoryJS.style.color = '#B5B5B5'; keyWordCategoryJS.style.backgroundColor = '#46494f'; }
function genreFunction (){
genreListingJS.style.display = 'none'; genreCategoryJS.style.color = '#B5B5B5'; genreCategoryJS.style.backgroundColor = '#46494f'; }
function languageFunction (){
languageListingJS.style.display = 'none'; languageCategoryJS.style.color = '#B5B5B5'; languageCategoryJS.style.backgroundColor = '#46494f'; }
function authorFunction (){
authorListingJS.style.display = 'none'; authorCategoryJS.style.color = '#B5B5B5';
authorCategoryJS.style.backgroundColor = '#46494f'; authorCategoryJS.style.borderRadius = '0px 0px 0px 7px'; }
function authorFunction2 (){authorCategoryJS.style.borderRadius = '0px 0px 7px 7px'; categoriesDisplaying.style.borderRadius = '0px 0px 7px 7px'; }

//FONCTION RECHERCHE (2 parties qui fonctionne ensemble)////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function searchFunction(){ cacheLibrary.push(library[i]); cacheBookAuthor.push(bookAuthor[i]); cacheBookTitle.push(bookTitle[i]); cacheBookLanguage.push(bookLanguage[i]); cacheBookGenre.push(bookGenre[i]);
     cacheBookLink.push(bookLink[i]); cacheBookKeyWord.push(bookKeyWord[i]);
     library.splice(i, 1); bookTitle.splice(i, 1); bookLanguage.splice(i, 1); bookAuthor.splice(i, 1); bookGenre.splice(i, 1); bookLink.splice(i, 1); bookKeyWord.splice(i, 1); i--;}
function searchFunction2(){ library.push(cacheLibrary[i]); bookAuthor.push(cacheBookAuthor[i]); bookTitle.push(cacheBookTitle[i]); bookLanguage.push(cacheBookLanguage[i]); bookGenre.push(cacheBookGenre[i]);
      bookLink.push(cacheBookLink[i]); bookKeyWord.push(cacheBookKeyWord[i]);
      cacheLibrary.splice(i, 1); cacheBookTitle.splice(i, 1); cacheBookLanguage.splice(i, 1); cacheBookAuthor.splice(i, 1); cacheBookGenre.splice(i, 1); cacheBookLink.splice(i, 1); cacheBookKeyWord.splice(i, 1);
      i--;}
function searchFunction3(){ forgottenLibrary.push(cacheLibrary[i]); forgottenBookAuthor.push(cacheBookAuthor[i]); forgottenBookTitle.push(cacheBookTitle[i]); forgottenBookLanguage.push(cacheBookLanguage[i]);
      forgottenBookGenre.push(cacheBookGenre[i]); forgottenBookLink.push(cacheBookLink[i]); forgottenBookKeyWord.push(cacheBookKeyWord[i]);
      cacheLibrary.splice(i, 1); cacheBookTitle.splice(i, 1); cacheBookAuthor.splice(i, 1); cacheBookGenre.splice(i, 1); cacheBookLanguage.splice(i, 1); cacheBookLink.splice(i, 1);
      cacheBookKeyWord.splice(i, 1); i--;};

//CLASSEMENT ALPHABETIQUE////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//par auteur
authorClassement.addEventListener('click', storageOfAuthor);
function storageOfAuthor(){
bookAuthorStorage = []; for (i = 0; i < library.length; i++) {bookAuthorStorage.push(bookAuthor[i]); bookAuthorStorage.sort();}
  if (bookAuthorStorage.join() == bookAuthor.join()) { reverselist(); }
  else { for (i = 0; i < library.length; i++) {while (bookAuthorStorage[i] != bookAuthor[i]) { putOn (); takeOff ();} }}
libraryErase(); libraryWrite();}

//par titre
titleClassement.addEventListener('click', storageOfTitle);
function storageOfTitle(){
bookTitleStorage = []; for (i = 0; i < library.length; i++) {bookTitleStorage.push(bookTitle[i]); bookTitleStorage.sort();}
  if (bookTitleStorage.join() == bookTitle.join()) { reverselist(); }
  else { for (i = 0; i < library.length; i++) {while (bookTitleStorage[i] != bookTitle[i]) { putOn (); takeOff ();} }}
libraryErase(); libraryWrite();}

//par genre
genreClassement.addEventListener('click', storageOfGenre);
function storageOfGenre(){
bookGenreStorage = []; for (i = 0; i < library.length; i++) {bookGenreStorage.push(bookGenre[i]); bookGenreStorage.sort();}
  if (bookGenreStorage.join() == bookGenre.join()) { reverselist(); }
  else { for (i = 0; i < library.length; i++) {while (bookGenreStorage[i] != bookGenre[i]) { putOn (); takeOff ();} }}
libraryErase(); libraryWrite();}

//par langue
languageClassement.addEventListener('click', storageOfLanguage);
function storageOfLanguage(){
bookLanguageStorage = []; for (i = 0; i < library.length; i++) {bookLanguageStorage.push(bookLanguage[i]); bookLanguageStorage.sort();}
  if (bookLanguageStorage.join() == bookLanguage.join()) { reverselist(); }
  else { for (i = 0; i < library.length; i++) {while (bookLanguageStorage[i] != bookLanguage[i]) { putOn (); takeOff ();} }}
libraryErase(); libraryWrite();}

//CREATION DESTRUCTION LIBRAIRIE EN HTML////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//création de la librairieHTML
function libraryWrite () {
  for (i = 0; i < library.length ; i++){
    document.getElementById('libraryHTML').innerHTML+=
        '<ul class=bookHTML id=bookHTML' + i + '><div class=linkHTML id=linkHTML' + i + ' src=' + bookLink[i] + '> <li class=genreHTML id=genreHTML' + i + '>' + bookGenre[i] +
        '</li><li class=authorHTML id=authorHTML' + i + '>' + bookAuthor[i] +
        '</li><li class=titleHTML id=titleHTML' + i + '>' + bookTitle[i] +
        '</li><li class=languageHTML id=languageHTML' + i + ' title=' + bookLanguage[i] + ' >' + '<img class=languageImage id=languageImage' + i + ' src=image/english.png>' +
        '</li> </div> </ul>';

        if ( bookLanguage[i] == 'Anglais') { document.getElementById('languageImage' + i).src = 'image/english.png' }
        if ( bookLanguage[i] == 'Français') { document.getElementById('languageImage' + i).src = 'image/french.png' }
        if ( bookLanguage[i] == 'Allemand') { document.getElementById('languageImage' + i).src = 'image/german.png' }
        if ( bookLanguage[i] == 'Japonais') { document.getElementById('languageImage' + i).src = 'image/japanese.png' }
        if ( bookLanguage[i] == 'Chinois') { document.getElementById('languageImage' + i).src = 'image/chinese.png' }
      }


      numberOfAuthorTitleGenreLanguage (); alphabeticalArrows(); getLink ();}

//supression de la librairieHTML
function libraryErase () { for (i = 0; i < library.length ; i++){ document.getElementById('libraryHTML').textContent = ''; } }


//BARRE DE RECHERCHE/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
let search = document.getElementById('search');
search.addEventListener ('input', searching);
function searching(e){
  libraryErase();
  let filter = e.target.value.toUpperCase();
//partie pour enlever les livres qui ne correspondent pas a la recherche
  for (i = 0; i < library.length; i++) {
    if ((bookAuthor[i].toUpperCase().indexOf(filter) > -1) || (bookTitle[i].toUpperCase().indexOf(filter) > -1)  ||
        (bookGenre[i].toUpperCase().indexOf(filter) > -1) || (bookLanguage[i].toUpperCase().indexOf(filter) > -1) || (bookKeyWord[i].toUpperCase().indexOf(filter) > -1))
       {}
    else {searchFunction();} console.log(library); console.log(cacheLibrary);}
//partie pour récuperer un truc du cache et le remettre dans la bibliotheque
  for (i = 0; i < cacheLibrary.length; i++) {
    if ((cacheBookAuthor[i].toUpperCase().indexOf(filter) > -1) || (cacheBookTitle[i].toUpperCase().indexOf(filter) > -1) ||
        (cacheBookGenre[i].toUpperCase().indexOf(filter) > -1) || (cacheBookLanguage[i].toUpperCase().indexOf(filter) > -1) || (cacheBookKeyWord[i].toUpperCase().indexOf(filter) > -1))
        { searchFunction2(); console.log(library); console.log(cacheLibrary); } }
libraryWrite();}

//OUVERTURE FERMETURE BARRE CATEGORIES/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
let counter = 1;
buttonCategoriesSelection.addEventListener ('mousedown', displayingCategories);
function displayingCategories(){
  if (buttonCategoriesSelectionText.innerText != 'Catégories') {
    buttonCategoriesSelection.style.backgroundColor = '#36393F'; buttonCategoriesSelectionText.innerText = 'Catégories '; buttonCategoriesSelectionText.style.color = '#adadad';
    search.placeholder = 'Recherche par auteur, titre, theme, mots clés...'; buttonCategoriesSelectionImage.src = 'image/openCat.png';
    counter++;

  for (i = 0; i < forgottenLibrary.length; i++) {
    cacheLibrary.push(forgottenLibrary[i]); cacheBookAuthor.push(forgottenBookAuthor[i]); cacheBookTitle.push(forgottenBookTitle[i]); cacheBookGenre.push(forgottenBookGenre[i]);
    cacheBookLink.push(forgottenBookLink[i]); cacheBookKeyWord.push(forgottenBookKeyWord[i]); cacheBookLanguage.push(forgottenBookLanguage[i]);
    forgottenLibrary.splice(i, 1); forgottenBookTitle.splice(i, 1); forgottenBookAuthor.splice(i, 1); forgottenBookGenre.splice(i, 1); forgottenBookLink.splice(i, 1); forgottenBookLanguage.splice(i, 1);
    forgottenBookKeyWord.splice(i, 1); i--; }

  for (i = 0; i < cacheLibrary.length; i++) {searchFunction2();}
    libraryErase(); libraryWrite();}

  else if ( counter % 2 != 0) {
    categoriesDisplayingOrganisation.style.display = 'flex'; categoriesDisplayingOrganisation.style.borderRadius = '0px 0px 7px 7px'; categoriesDisplaying.style.borderRadius = '0px 0px 7px 7px';
    keyWordCategoryJS.style.color = '#B5B5B5'; genreCategoryJS.style.color = '#B5B5B5'; languageCategoryJS.style.color = '#B5B5B5'; authorCategoryJS.style.color = '#B5B5B5';
    authorCategoryJS.style.borderRadius = '0px 0px 7px 7px';
    buttonCategoriesSelection.style.borderRadius = '5px 0px 0px 0px'; buttonCategoriesSelection.style.color = '#B5B5B5';buttonCategoriesSelection.style.backgroundColor = '#46494f';
    buttonCategoriesSelectionImage.src = 'image/closeCat.png';}


  else {
    categoriesDisplayingOrganisation.style.display = 'none';
    keyWordListingJS.style.display = 'none'; keyWordCategoryJS.style.backgroundColor = '#46494f'; if ( counterKW % 2 == 0) { counterKW --; }
    authorListingJS.style.display = 'none'; authorCategoryJS.style.backgroundColor = '#46494f'; if ( counterAuthor % 2 == 0) { counterAuthor --; }
    genreListingJS.style.display = 'none'; genreCategoryJS.style.backgroundColor = '#46494f'; if ( counterGenre % 2 == 0) { counterGenre --; }
    languageListingJS.style.display = 'none'; languageCategoryJS.style.backgroundColor = '#46494f'; if ( counterLanguage % 2 == 0) { counterLanguage --; }
    buttonCategoriesSelection.style.borderRadius = '5px 2px 2px 5px'; buttonCategoriesSelection.style.color = '#adadad';
    buttonCategoriesSelection.style.backgroundColor = '#36393F'; buttonCategoriesSelectionImage.src = 'image/openCat.png';
} counter++; }

//OUVERTURE FERMETURE CATEGORIES MOT CLES///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
let counterKW = 1;
keyWordCategory.addEventListener('mousedown', displayingKeyWordCategoryContent);
function displayingKeyWordCategoryContent() {
if ( counterKW % 2 != 0) {
  genreFunction(); authorFunction (); languageFunction();
  categoriesContent.style.display = '';
  keyWordListingJS.style.display = 'flex'; keyWordListingJS.style.borderRadius = '0px 7px 7px 7px';
  keyWordCategoryJS.style.color = 'white'; keyWordCategoryJS.style.backgroundColor = 'gray';
  categoriesDisplaying.style.borderRadius = '0px 0px 0px 7px'; counterAuthor = 1; counterGenre = 1; counterLanguage = 1;}
else {keyWordFunction(); authorFunction2();} counterKW ++; }
//OUVERTURE FERMETURE CATEGORIES GENRE///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
let counterGenre = 1;
genreCategory.addEventListener('mousedown', displayingGenreCategoryContent);
function displayingGenreCategoryContent() {
if ( counterGenre % 2 != 0) {
  keyWordFunction(); authorFunction(); languageFunction(); categoriesContent.style.display = '';
  genreListingJS.style.display = 'flex'; genreListingJS.style.borderRadius = '0px 7px 7px 7px';
  genreCategoryJS.style.color = 'white'; genreCategoryJS.style.backgroundColor = 'gray';
  categoriesDisplaying.style.borderRadius = '0px 0px 0px 7px'; counterKW = 1; counterAuthor = 1; counterLanguage = 1;}
else { genreFunction (); authorFunction2(); } counterGenre ++; }
//OUVERTURE FERMETURE CATEGORIES AUTEUR//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
let counterAuthor = 1;
authorCategory.addEventListener('mousedown', displayingAuthorCategoryContent);
function displayingAuthorCategoryContent() {
if ( counterAuthor % 2 != 0) {
  keyWordFunction(); genreFunction(); languageFunction(); categoriesContent.style.display = '';
  authorListingJS.style.display = 'flex'; authorListingJS.style.borderRadius = '0px 7px 7px 7px';
  authorCategoryJS.style.borderRadius = '0px 0px 0px 7px'; authorCategoryJS.style.color = 'white'; authorCategoryJS.style.backgroundColor = 'gray';
  categoriesDisplaying.style.borderRadius = '0px 0px 7px 7px'; counterKW = 1; counterGenre = 1; counterLanguage = 1;}
else { authorFunction (); authorFunction2(); } counterAuthor ++; }
//OUVERTURE FERMETURE CATEGORIES LANGUE//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
let counterLanguage = 1;
languageCategory.addEventListener('mousedown', displayingLanguageCategoryContent);
function displayingLanguageCategoryContent() {
if ( counterLanguage % 2 != 0) {
  keyWordFunction(); genreFunction(); authorFunction(); categoriesContent.style.display = '';
  languageListingJS.style.display = 'flex'; languageListingJS.style.borderRadius = '0px 7px 7px 7px';
  languageCategoryJS.style.borderRadius = '0px 0px 0px 0px'; languageCategoryJS.style.color = 'white'; languageCategoryJS.style.backgroundColor = 'gray';
  categoriesDisplaying.style.borderRadius = '0px 0px 7px 7px'; counterKW = 1; counterGenre = 1; counterAuthor = 1;}
else { languageFunction (); authorFunction2(); } counterLanguage ++; }

///SELECTION MOT CLES//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
keyWordListingJS.addEventListener("mouseup", function( event ) {

  let fTL = event.composedPath();
  let fTL2 = fTL[0].innerHTML;

  if (fTL2.length > 100){} else {
  libraryErase(); let test = fTL2, filter = test.toUpperCase();
  for (i = 0; i < library.length; i++) {if (bookKeyWord[i].toUpperCase().indexOf(filter) > -1) {}
    else {searchFunction(); } }
  for (i = 0; i < cacheLibrary.length; i++) { searchFunction3(); }
  keyWordListingJS.style.display = 'none'; keyWordCategoryJS.style.color = '#B5B5B5'; keyWordCategoryJS.style.backgroundColor = '#46494f';
  authorListingJS.style.display = 'none'; authorCategoryJS.style.borderRadius = '0px 0px 7px 7px';
  categoriesDisplayingOrganisation.style.display = 'flex'; categoriesDisplayingOrganisation.style.display = 'none'; counter --;
  buttonCategoriesSelection.style.borderRadius = '5px 2px 2px 5px'; buttonCategoriesSelection.style.backgroundColor = '#36393F';
  buttonCategoriesSelectionText.innerText = fTL2; buttonCategoriesSelectionImage.src = 'image/initCat.png';
  searchHTMLApparence.placeholder = 'Recherche dans la catégories ' + fTL2 + '...';

  counterKW = 1; libraryWrite(); }});

///SELECTION GENRE/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
genreListingJS.addEventListener("mouseup", function( event ) {

  let fTL = event.composedPath();
  let fTL2 = fTL[0].innerHTML;

  if (fTL2.length > 100){} else {
  libraryErase(); let test = fTL2, filter = test.toUpperCase();
  for (i = 0; i < library.length; i++) { if (bookGenre[i].toUpperCase().indexOf(filter) > -1) {}
    else {searchFunction();} }
  for (i = 0; i < cacheLibrary.length; i++) { searchFunction3(); }

  genreListingJS.style.display = 'none'; genreCategoryJS.style.color = '#B5B5B5'; genreCategoryJS.style.backgroundColor = '#46494f';
  keyWordListingJS.style.display = 'none';
  categoriesDisplayingOrganisation.style.display = 'flex'; categoriesDisplayingOrganisation.style.display = 'none'; counter --;
  buttonCategoriesSelection.style.borderRadius = '5px 2px 2px 5px'; buttonCategoriesSelection.style.backgroundColor = '#36393F';
  buttonCategoriesSelectionText.innerText = fTL2; buttonCategoriesSelectionImage.src = 'image/initCat.png';
  searchHTMLApparence.placeholder = 'Recherche dans la catégories ' + fTL2 + '...';
  counterGenre = 1; libraryWrite(); }});

///SELECTION AUTEUR////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
authorListingJS.addEventListener("mouseup", function( event ) {

  let fTL = event.composedPath();
  let fTL2 = fTL[0].innerHTML;

  if (fTL2.length > 100){} else {
  libraryErase(); let test = fTL2, filter = test.toUpperCase();
  for (i = 0; i < library.length; i++) { if (bookAuthor[i].toUpperCase().indexOf(filter) > -1) {}
          else {searchFunction();} }
  for (i = 0; i < cacheLibrary.length; i++) { searchFunction3(); }

  authorListingJS.style.display = 'none'; authorCategoryJS.style.color = '#B5B5B5'; authorCategoryJS.style.backgroundColor = '#46494f'; authorCategoryJS.style.borderRadius = '0px 0px 7px 7px';
  keyWordListingJS.style.display = 'none';
  categoriesDisplayingOrganisation.style.display = 'flex'; categoriesDisplayingOrganisation.style.display = 'none'; counter --;
  buttonCategoriesSelection.style.borderRadius = '5px 2px 2px 5px'; buttonCategoriesSelection.style.backgroundColor = '#36393F';
  buttonCategoriesSelectionText.innerText = fTL2; buttonCategoriesSelectionImage.src = 'image/initCat.png';
  searchHTMLApparence.placeholder = 'Recherche dans la catégories ' + fTL2 + '...';

  counterAuthor = 1;  libraryWrite(); }});

///SELECTION LANGUE////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
languageListingJS.addEventListener("mouseup", function( event ) {

  let fTL = event.composedPath();
  let fTL2 = fTL[0].innerHTML;

  if (fTL2.length > 100){} else {
  libraryErase(); let test = fTL2, filter = test.toUpperCase();
  for (i = 0; i < library.length; i++) { if (bookLanguage[i].toUpperCase().indexOf(filter) > -1) {}
          else {searchFunction();} }
  for (i = 0; i < cacheLibrary.length; i++) { searchFunction3(); }

  languageListingJS.style.display = 'none'; languageCategoryJS.style.color = '#B5B5B5'; languageCategoryJS.style.backgroundColor = '#46494f'; languageCategoryJS.style.borderRadius = '0px 0px 7px 7px';
  keyWordListingJS.style.display = 'none';
  categoriesDisplayingOrganisation.style.display = 'flex'; categoriesDisplayingOrganisation.style.display = 'none'; counter --;
  buttonCategoriesSelection.style.borderRadius = '5px 2px 2px 5px'; buttonCategoriesSelection.style.backgroundColor = '#36393F';
  buttonCategoriesSelectionText.innerText = fTL2; buttonCategoriesSelectionImage.src = 'image/initCat.png';
  searchHTMLApparence.placeholder = 'Recherche dans la catégories ' + fTL2 + '...';

  counterLanguage = 1;  libraryWrite(); }});


//EXECUTION/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
libraryWrite();

function getLink (){
let linkHTML = document.getElementsByClassName('linkHTML');
for(i = 0; i < linkHTML.length; i++){
 linkHTML[i].addEventListener('mousedown', openningPDFFunction);
 function openningPDFFunction() {
   let regex = /[P][D][F][/].{1,}[p][d][f]/;
   let findTheLink = event.composedPath();
   let findTheLink2 = findTheLink[2].innerHTML.match(regex);
   if (window.matchMedia("(max-width: 510px)").matches) {
    window.location.href= findTheLink2;
   } else {
     pdfDisplay.style.display = 'flex';
     document.getElementById('body').style.overflow = 'hidden';
     pdfDisplayContent.src = findTheLink2;
   }

 } } }

pdfpagination1.addEventListener('mousedown', closingPDFFunction);
function closingPDFFunction() {pdfDisplay.style.display = 'none'; document.getElementById('body').style.overflow = '';}
pdfpagination2.addEventListener('mousedown', closingPDFFunction);
function closingPDFFunction() {pdfDisplay.style.display = 'none'; document.getElementById('body').style.overflow = '';}
